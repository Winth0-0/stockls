import{a as oe,d as re,f as ae}from"./chunk-SJ62V47W.js";import{a as se}from"./chunk-UAU5ASY2.js";import{a as le}from"./chunk-LPLLE4YT.js";import{A as ie,J as ne,t as U,u as X,v as Y,w as Z,x as $,y as ee,z as te}from"./chunk-WM2E7EKX.js";import{a as R}from"./chunk-CJJIXIBH.js";import{d as j,g as Q,l as G,q as K,r as z,s as H,w as J}from"./chunk-7TKS4KVV.js";import{h as q}from"./chunk-LHRQNHW5.js";import"./chunk-J73STOSX.js";import"./chunk-RWF2ZYCY.js";import{Bc as A,Cc as o,Db as L,Dc as C,Ec as S,Hc as p,Ic as _,Jb as b,Jc as f,Jd as O,Ld as F,Sb as c,Uc as D,Wc as B,Yc as T,cc as e,dc as t,ec as g,ic as w,mc as x,ob as a,oc as E,tc as V,ub as k,vc as M,vd as P,wc as I,wd as W,xa as u,xc as N,ya as s}from"./chunk-WLVN7P5V.js";import{e as ue,f as y}from"./chunk-EQDQRRRY.js";var de=ue(se());var ce=["secondDialog"];function Ee(m,h){if(m&1){let i=w();e(0,"div",15)(1,"label",16),o(2,"\u0E1E\u0E19\u0E31\u0E01\u0E07\u0E32\u0E19\u0E02\u0E32\u0E22"),t(),e(3,"input",28),f("ngModelChange",function(n){u(i);let l=E();return _(l.formData.salecode,n)||(l.formData.salecode=n),s(n)}),t()()}if(m&2){let i=E();a(3),p("ngModel",i.formData.salecode)}}function pe(m,h){if(m&1){let i=w();e(0,"tr")(1,"td")(2,"div",48)(3,"a",49),o(4),t()()(),e(5,"td"),o(6),t(),e(7,"td")(8,"fieldset",50)(9,"div",44)(10,"button",51),x("click",function(){let n=u(i).$implicit,l=E();return s(l.decrement(n.goodid))}),g(11,"i",52),t(),g(12,"input",53),e(13,"button",54),x("click",function(){let n=u(i).$implicit,l=E();return s(l.increment(n.goodid))}),g(14,"i",55),t()()()(),e(15,"td")(16,"app-feathericon",56),x("click",function(){let n=u(i).$implicit,l=E();return s(l.removeItem(n.goodid))}),t()(),e(17,"td"),o(18),t()()}if(m&2){let i=h.$implicit;a(4),S(" ",i.name," "),a(2),C(i.unitprice),a(6),c("value",i.amou),a(4),c("icon","x-circle"),a(2),C(i.unitprice*i.amou)}}function _e(m,h){if(m&1){let i=w();e(0,"tr")(1,"th",73),o(2),t(),e(3,"td"),o(4),t(),e(5,"td"),o(6),D(7,"number"),t(),e(8,"td"),o(9),t(),e(10,"td")(11,"button",74),x("click",function(){let n=u(i).$implicit,l=E(3);return s(l.addProduct(n))}),o(12,"Add"),t()()()}if(m&2){let i=h.$implicit;a(2),S(" ",i.id," "),a(2),S(" ",i.goodname," "),a(2),S(" ",B(7,5,i.unitprice,"1.2-2")," "),a(3),S(" ",i.stockonhand0+i.stockonhand1+i.stockonhand2," "),a(2),c("disabled",i.stockonhand0+i.stockonhand1+i.stockonhand2<=0)}}function fe(m,h){if(m&1&&(e(0,"table",71)(1,"thead")(2,"tr")(3,"th",72),o(4,"#"),t(),e(5,"th",72),o(6,"Product Name"),t(),e(7,"th",72),o(8,"Price"),t(),e(9,"th",72),o(10,"Total StockOnHand0"),t(),e(11,"th",72),o(12,"Action"),t()()(),e(13,"tbody"),b(14,_e,13,8,"tr",42),t()()),m&2){let i=E(2);a(14),c("ngForOf",i.stockinfo)}}function ge(m,h){if(m&1){let i=w();e(0,"tr")(1,"th",73),o(2),t(),e(3,"td"),o(4),t(),e(5,"td"),o(6),D(7,"number"),t(),e(8,"td")(9,"button",39),x("click",function(){let n=u(i).$implicit,l=E(3);return s(l.addPromotion(n))}),o(10,"Add"),t()()()}if(m&2){let i=h.$implicit;a(2),S(" ",i.id," "),a(2),S(" ",i.name," "),a(2),S(" ",B(7,3,i.totalprice,"1.2-2")," ")}}function he(m,h){if(m&1&&(e(0,"table",71)(1,"thead")(2,"tr")(3,"th",72),o(4,"#"),t(),e(5,"th",72),o(6,"Promotion Name"),t(),e(7,"th",72),o(8,"Total Price"),t(),e(9,"th",72),o(10,"Action"),t()()(),e(11,"tbody"),b(12,ge,11,6,"tr",42),t()()),m&2){let i=E(2);a(12),c("ngForOf",i.promotioninfo)}}function ve(m,h){if(m&1){let i=w();e(0,"div",57)(1,"h4",58),o(2,"\u0E40\u0E25\u0E37\u0E2D\u0E01\u0E2A\u0E34\u0E19\u0E04\u0E49\u0E32"),t()(),e(3,"div",59)(4,"div",6)(5,"div",7)(6,"h4"),o(7,"\u0E23\u0E32\u0E22\u0E01\u0E32\u0E23\u0E2A\u0E34\u0E19\u0E04\u0E49\u0E32 \u0E41\u0E25\u0E30 \u0E42\u0E1B\u0E23\u0E42\u0E21\u0E0A\u0E31\u0E48\u0E19"),t(),e(8,"p",60),o(9,"\u0E40\u0E25\u0E37\u0E2D\u0E01\u0E2A\u0E34\u0E19\u0E04\u0E49\u0E32\u0E43\u0E0A\u0E48\u0E15\u0E30\u0E01\u0E23\u0E49\u0E32\u0E2A\u0E34\u0E19\u0E04\u0E49\u0E32\u0E41\u0E25\u0E30\u0E1B\u0E23\u0E31\u0E1A\u0E08\u0E33\u0E19\u0E27\u0E19\u0E17\u0E35\u0E48\u0E15\u0E49\u0E2D\u0E07\u0E01\u0E32\u0E23\u0E2B\u0E19\u0E49\u0E32\u0E15\u0E30\u0E01\u0E23\u0E49\u0E32\u0E2A\u0E34\u0E19\u0E04\u0E49\u0E32 "),t()(),e(10,"div",14)(11,"ul",61,1),f("activeIdChange",function(n){u(i);let l=E();return _(l.active,n)||(l.active=n),s(n)}),e(13,"li",62)(14,"a",63),g(15,"i",64),o(16,"\u0E23\u0E32\u0E22\u0E01\u0E32\u0E23\u0E2A\u0E34\u0E19\u0E04\u0E49\u0E32"),t(),b(17,fe,15,1,"ng-template",65),t(),e(18,"li",62)(19,"a",66),g(20,"i",67),o(21,"\u0E42\u0E1B\u0E23\u0E42\u0E21\u0E0A\u0E31\u0E48\u0E19 "),t(),b(22,he,13,1,"ng-template",65),t()(),g(23,"div",68),t()()(),e(24,"div",69)(25,"button",70),x("click",function(){let n=u(i).close;return s(n("Close click"))}),o(26,"\u0E1B\u0E34\u0E14"),t()()}if(m&2){let i=A(12),r=E();a(11),p("activeId",r.active),a(2),c("ngbNavItem",1),a(5),c("ngbNavItem",2),a(5),c("ngbNavOutlet",i)}}var me=(()=>{class m{constructor(i,r){this.service=i,this.modalService=r,this.cartData=le,this.active=1,this.stockinfo=[],this.user=null,this.formData={stock:"0",usrid:"",salecode:"",nameaddr:"",sendaddr:"",timecreate:new Date().toISOString().split("T")[0],phoneaddr:"",remark:"",branch:"0",list:[]},this.promotioninfo=[]}ngOnInit(){return y(this,null,function*(){this.user=JSON.parse(localStorage.getItem("user")||"null");try{this.stockinfo=yield this.service.GetStockInfo()}catch(i){console.error("API failed:",i),alert("API failed")}})}pop(){return y(this,null,function*(){try{this.promotioninfo=[],this.promotioninfo=yield this.service.GetPromotion("2024-01-01","2028-01-01")}catch(i){console.error("API failed:",i),alert("API failed")}this.modalService.open(this.secondDialog,{ariaLabelledBy:"modal-basic-title",size:"lg"})})}send(){return y(this,null,function*(){if(console.log(this.formData),this.formData.stock=="0"||this.formData.list.length==0)alert("\u0E01\u0E23\u0E38\u0E13\u0E32\u0E23\u0E30\u0E1A\u0E38\u0E02\u0E49\u0E2D\u0E21\u0E39\u0E25\u0E43\u0E2B\u0E49\u0E04\u0E23\u0E1A\u0E16\u0E49\u0E27\u0E19");else{let i={stock:this.formData.stock,salecode:this.formData.salecode,usrid:this.user?.usrcode,nameaddr:this.formData.nameaddr,sendaddr:this.formData.sendaddr,phoneaddr:this.formData.phoneaddr,branch:this.formData.branch,timecreate:this.formData.timecreate,remark:this.formData.remark,list:this.formData.list},r=new re(i.stock,i.salecode,i.usrid??"",i.nameaddr,i.sendaddr,i.phoneaddr,i.branch,i.remark,i.timecreate,i.list.map(n=>new ae(n.goodid,n.amou,n.unitprice,n.ispro)));try{yield this.service.UpdateOrderStock(r),de.default.fire({title:"Success",icon:"success",draggable:!0}),this.formData={stock:"0",usrid:"",salecode:"",nameaddr:"",sendaddr:"",timecreate:new Date().toISOString().split("T")[0],phoneaddr:"",remark:"",branch:"0",list:[]},this.ngOnInit()}catch(n){console.error("API failed:",n),alert("API failed")}}})}increment(i){let r=this.formData.list.find(n=>n.goodid===i);r&&r.amou++}decrement(i){let r=this.formData.list.find(n=>n.goodid===i);r&&r.amou>1&&r.amou--}removeItem(i){this.formData.list=this.formData.list.filter(r=>r.goodid!==i)}addProduct(i){this.formData.list.find(n=>n.goodid===i.id&&n.ispro==="0")||this.formData.list.push({name:i.goodname,goodid:i.id,unitprice:i.unitprice,amou:1,ispro:"0"})}addPromotion(i){this.formData.list.find(n=>n.goodid===i.id&&n.ispro==="1")||this.formData.list.push({name:i.name,goodid:i.id,unitprice:i.totalprice,amou:1,ispro:"1"})}get totalPrice(){return this.formData.list.reduce((i,r)=>{let n=Number(r.unitprice)||0,l=Number(r.amou)||0;return i+n*l},0)}static{this.\u0275fac=function(r){return new(r||m)(k(oe),k(U))}}static{this.\u0275cmp=L({type:m,selectors:[["app-letter-box"]],viewQuery:function(r,n){if(r&1&&M(ce,7),r&2){let l;I(l=N())&&(n.secondDialog=l.first)}},decls:119,vars:16,consts:[["secondDialog",""],["nav","ngbNav"],[1,"container-fluid"],[1,"edit-profile"],[1,"row"],[1,"col-xl-12"],[1,"card"],[1,"card-header"],[1,"card-title","mb-0"],[1,"card-options"],["href","javascript:void(0)",1,"card-options-collapse"],[1,"fe","fe-chevron-up"],["href","javascript:void(0)",1,"card-options-remove"],[1,"fe","fe-x"],[1,"card-body"],[1,"mb-3"],[1,"form-label"],[1,"form-control","btn-square",3,"ngModelChange","ngModel"],["value","0"],["value","stockonhand0"],["value","stockonhand1"],["value","stockonhand2"],["value","stockonhand3"],["value","stockonhand4"],["value","stockonhand5"],["class","mb-3",4,"ngIf"],["type","text",1,"form-control",3,"ngModelChange","ngModel","placeholder","disabled"],["type","date",1,"form-control",3,"ngModelChange","ngModel"],["placeholder","","type","text",1,"form-control",3,"ngModelChange","ngModel"],["value","facebook"],["value","tiktok"],["value","line"],["value","shopee"],["value","dealer"],["value","other"],[1,"form-footer","mt-3"],[1,"btn","btn-primary","btn-block",3,"click","disabled"],[1,"col-sm-12"],[1,"card-header","card-no-border","total-revenue"],[1,"btn","btn-primary",3,"click"],[1,"order-history","table-responsive","wishlist","custom-scrollbar"],[1,"table","table-bordered"],[4,"ngFor","ngForOf"],["colspan","3"],[1,"input-group"],[1,"total-amount"],[1,"m-0","text-end"],[1,"f-w-600"],[1,"product-name"],["href","javascript:void(0)"],[1,"qty-box"],[1,"btn","btn-primary","btn-square","bootstrap-touchspin-down",3,"click"],[1,"fa","fa-minus"],["type","text","readonly","",1,"touchspin","text-center","form-control",3,"value"],[1,"btn","btn-primary","btn-square","bootstrap-touchspin-up",3,"click"],[1,"fa","fa-plus"],[3,"click","icon"],[1,"modal-header"],["id","modal-basic-title",1,"modal-title"],[1,"modal-body"],[1,"mt-1","f-m-light"],["id","icon-tab","role","tablist","ngbNav","",1,"nav","nav-tabs",3,"activeIdChange","activeId"],[1,"nav-item",3,"ngbNavItem"],["id","icon-home-tab","ngbNavLink","",1,"nav-link","txt-secondary"],[1,"icofont","icofont-ui-home"],["ngbNavContent",""],["id","profile-icon-tabs","ngbNavLink","",1,"nav-link","txt-secondary"],[1,"icofont","icofont-man-in-glasses"],[1,"mt-4",3,"ngbNavOutlet"],[1,"modal-footer"],["type","button",1,"btn","btn-outline-dark","font-fam",3,"click"],[1,"table","table-striped","data-striped"],["scope","col"],["scope","row"],[1,"btn","btn-primary",3,"click","disabled"]],template:function(r,n){if(r&1){let l=w();e(0,"div",2)(1,"div",3)(2,"div",4)(3,"div",5)(4,"div",6)(5,"div",7)(6,"h4",8),o(7,"\u0E2A\u0E23\u0E49\u0E32\u0E07\u0E04\u0E33\u0E2A\u0E31\u0E48\u0E07\u0E0B\u0E37\u0E49\u0E2D"),t(),e(8,"div",9)(9,"a",10),g(10,"i",11),t(),e(11,"a",12),g(12,"i",13),t()()(),e(13,"div",14)(14,"div",15)(15,"label",16),o(16,"\u0E2A\u0E15\u0E47\u0E2D\u0E04"),t(),e(17,"select",17),f("ngModelChange",function(d){return u(l),_(n.formData.stock,d)||(n.formData.stock=d),s(d)}),e(18,"option",18),o(19,"--Select--"),t(),e(20,"option",19),o(21,"GorillaStock"),t(),e(22,"option",20),o(23,"K'KitStock"),t(),e(24,"option",21),o(25,"K'TorStock"),t(),e(26,"option",22),o(27,"PR Stock"),t(),e(28,"option",23),o(29,"Dealer Stock"),t(),e(30,"option",24),o(31,"Other"),t()()(),b(32,Ee,4,1,"div",25),e(33,"div",15)(34,"label",16),o(35,"\u0E2A\u0E23\u0E49\u0E32\u0E07\u0E42\u0E14\u0E22"),t(),e(36,"input",26),f("ngModelChange",function(d){return u(l),_(n.formData.usrid,d)||(n.formData.usrid=d),s(d)}),t()(),e(37,"div",15)(38,"label",16),o(39,"\u0E27\u0E31\u0E19\u0E17\u0E35\u0E48\u0E2A\u0E31\u0E48\u0E07\u0E2A\u0E34\u0E19\u0E04\u0E49\u0E32"),t(),e(40,"input",27),f("ngModelChange",function(d){return u(l),_(n.formData.timecreate,d)||(n.formData.timecreate=d),s(d)}),t()(),e(41,"div",15)(42,"label",16),o(43,"\u0E0A\u0E37\u0E48\u0E2D"),t(),e(44,"input",28),f("ngModelChange",function(d){return u(l),_(n.formData.nameaddr,d)||(n.formData.nameaddr=d),s(d)}),t()(),e(45,"div",15)(46,"label",16),o(47,"\u0E17\u0E35\u0E48\u0E2D\u0E22\u0E39\u0E48"),t(),e(48,"input",28),f("ngModelChange",function(d){return u(l),_(n.formData.sendaddr,d)||(n.formData.sendaddr=d),s(d)}),t()(),e(49,"div",15)(50,"label",16),o(51,"\u0E40\u0E1A\u0E2D\u0E23\u0E4C\u0E42\u0E17\u0E23"),t(),e(52,"input",28),f("ngModelChange",function(d){return u(l),_(n.formData.phoneaddr,d)||(n.formData.phoneaddr=d),s(d)}),t()(),e(53,"div",15)(54,"label",16),o(55,"\u0E2B\u0E21\u0E32\u0E22\u0E40\u0E2B\u0E15\u0E38"),t(),e(56,"input",28),f("ngModelChange",function(d){return u(l),_(n.formData.remark,d)||(n.formData.remark=d),s(d)}),t()(),e(57,"div",15)(58,"label",16),o(59,"\u0E2A\u0E32\u0E02\u0E32"),t(),e(60,"select",17),f("ngModelChange",function(d){return u(l),_(n.formData.branch,d)||(n.formData.branch=d),s(d)}),e(61,"option",18),o(62,"--Select--"),t(),e(63,"option",29),o(64,"FaceBook"),t(),e(65,"option",30),o(66,"TikTok Shop"),t(),e(67,"option",31),o(68,"Line OA"),t(),e(69,"option",32),o(70,"Shopee"),t(),e(71,"option",33),o(72,"Dealer"),t(),e(73,"option",34),o(74,"Other"),t()()(),e(75,"div",35)(76,"button",36),x("click",function(){return u(l),s(n.send())}),o(77,"Confirm"),t()()()()(),e(78,"div",5)(79,"div",6)(80,"div",2)(81,"div",4)(82,"div",37)(83,"div",6)(84,"div",38)(85,"h4"),o(86,"\u0E15\u0E30\u0E01\u0E23\u0E49\u0E32\u0E2A\u0E34\u0E19\u0E04\u0E49\u0E32"),t(),e(87,"button",39),x("click",function(){return u(l),s(n.pop())}),o(88,"\u0E40\u0E25\u0E37\u0E2D\u0E01\u0E2A\u0E34\u0E19\u0E04\u0E49\u0E32"),t()(),e(89,"div",14)(90,"div",4)(91,"div",40)(92,"table",41)(93,"thead")(94,"tr")(95,"th"),o(96,"Prdouct Name"),t(),e(97,"th"),o(98,"Price"),t(),e(99,"th"),o(100,"Quantity"),t(),e(101,"th"),o(102,"Action"),t(),e(103,"th"),o(104,"Total"),t()()(),e(105,"tbody"),b(106,pe,19,5,"tr",42),e(107,"tr")(108,"td",43),g(109,"div",44),t(),e(110,"td",45)(111,"h3",46)(112,"span",47),o(113,"Total Price :"),t()()(),e(114,"td")(115,"span"),o(116),t()()()()()()()()()()()()()()()()(),b(117,ve,27,4,"ng-template",null,0,T)}r&2&&(a(17),p("ngModel",n.formData.stock),a(15),c("ngIf",n.formData.stock=="stockonhand4"),a(4),V("placeholder","",n.user==null?null:n.user.fristname," ",n.user==null?null:n.user.lastname,""),p("ngModel",n.formData.usrid),c("disabled",!0),a(4),p("ngModel",n.formData.timecreate),a(4),p("ngModel",n.formData.nameaddr),a(4),p("ngModel",n.formData.sendaddr),a(4),p("ngModel",n.formData.phoneaddr),a(4),p("ngModel",n.formData.remark),a(4),p("ngModel",n.formData.branch),a(16),c("disabled",(n.user==null?null:n.user.row)!="admin"),a(30),c("ngForOf",n.formData.list),a(10),C(n.totalPrice.toFixed(2)))},dependencies:[F,P,W,O,q,R,ne,X,$,Z,Y,te,ee,ie,J,z,H,j,K,Q,G],encapsulation:2})}}return m})();var Te=[{path:"",component:me,data:{breadcrumb:"Letter Box"}}];export{Te as Email};
